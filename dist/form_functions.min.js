/*
 *  Form-Functions - v1.1.2
 *  Help functions for processing form errors
 *  http://highgate-creative.com
 *
 *  Made by Sean Zellmer <sean@lejeunerenard.com>
 *  Under MIT License
 */
function normalize_labels(a,b){var c={};"undefined"!=typeof b?(c.element=a,c.prefix=b):a&&(c.element=a),$(".errors_above").css("display","none");var d;d=$(c.element?"#"+$(c.element).attr("id")+" label[for]":"label[for]"),d.not(".static_label").each(function(){$(this).removeClass("error_label");var a=getLabel(this,c);0!==$('label.static_label[for="'+$(this).attr("for")+'"]').length&&(a=""),$(this).text(a)})}function preprocess_result(a){"string"==typeof a&&"["===a[0]&&(a=JSON.parse(a)),"string"==typeof a&&a.match(/.+\[\{"messages/)?a=JSON.parse(a.replace(/.+\[\{"messages/,'[{"messages').replace("</pre>","")):"string"==typeof a&&(a=JSON.parse($(a).text()));var b;return b=a instanceof Array?a[0].messages:a.errors?a.errors:a.success}function parse_results(a,b,c,d,e,f){var g={overlay:!0,showSuccessMsg:!0,form:$("form").first(),scrollToError:!1};"undefined"!=typeof b?(g.result=a,g.form=b,g.msgdiv=c,g.leave_open=d,g.not_reset_form=e,g.prefix=f):g=$.extend({},g,a),g.overlay&&$("#overlay").css("display","none"),$("#"+g.msgdiv+" p.error").remove();var h,i="";if(h=g.form instanceof $?g.form:$("#"+g.form),$.each(preprocess_result(g.result),function(a,b){for(var c in b){var d=b[c];if("success"===c)d instanceof Array?$.each(d,function(a,b){i+=$("<textarea />").html('<p class="success">'+b+"</p>").text()}):i+=$("<textarea />").html('<p class="success">'+d+"</p>").text();else if("su_"===c.substring(0,3))$($("label[for='"+c.substring(3)+"']")).not(".static_label").each(function(){$(this).addClass("success_label"),$(this).html(getLabel(this,g)+" "+d)}),$(".errors_above").css("display","block"),("captcha"===c||"generic"===c)&&($("#"+g.msgdiv).css("display","block"),$("#"+g.msgdiv).append('<p class="error">'+d+"</p>"));else{if("output"===c)return;c=c.replace("&#228;","ä"),c=c.replace("&#196;","Ä"),c=c.replace("&#246;","ö"),c=c.replace("&#214;","Ö"),c=c.replace("&#252;","ü"),c=c.replace("&#220;","Ü"),c=c.replace("&#223;","ß"),$(h.find("label[for='"+c+"']")).not(".static_label").each(function(){$(this).addClass("error_label"),$(this).html(getLabel(this,g)+" "+d)}),$(".errors_above").css("display","block"),("captcha"===c||"generic"===c)&&($("#"+g.msgdiv).css("display","block"),$("#"+g.msgdiv).append('<p class="error">'+d+"</p>"))}}}),i)g.leave_open||h.hide("fast"),g.not_reset_form||h.resetForm(),g.showSuccessMsg&&($("#"+g.msgdiv).css("display","block"),$("#"+g.msgdiv+" p").css("display","block"),$("#"+g.msgdiv+" p.error").css("display","none"),$("#"+g.msgdiv).append(i)),$("html, body").animate({scrollTop:0},"fast"),"function"==typeof g.success&&g.success(g.result),"undefined"!=typeof redirect_set&&redirect_set?redirect():"function"==typeof g.redirect&&g.redirect();else{if(g.scrollToError){var j=$("#"+g.msgdiv+" .error");0===j.length&&(j=h.find(".error_label, .error")),$("html, body").animate({scrollTop:j.offset().top},"fast")}"function"==typeof g.error&&g.error(g.result)}}function getLabel(a,b){if(!$(a).data("lab")){var c=$(a).attr("lab")||$(a).text();$(a).data("lab",c)}var d=$(a).data("lab")||$(a).attr("lab")||$(a).attr("for");return b.prefix&&(d=d.replace(b.prefix,"")),b.capitalize&&(d=$(a).attr("lab").slice(0,1).toUpperCase()+$(a).attr("lab").slice(1)),d=d.replace(/_/g," ")}function counter(a,b,c,d){var e=document.getElementById(c).value,f=e.length;return document.getElementById("counter"+a).value=d?b-f:f,f>b?(document.getElementById("counter"+a).style.background="pink",alert("Please keep your answers within "+b+" characters. And please, no pasting of any word processing files. Thank you."),!1):void(document.getElementById("counter"+a).style.background="#fff")}function format_currency(a){namount=Math.abs(a),namount=parseInt(100*(namount+.005)),namount/=100;var b=String(namount);return b.indexOf(".")<0&&(b+=".00"),b.indexOf(".")===b.length-2&&(b+="0"),b}$(function(){$(document).on("keyup","textarea.counter",function(){var a=$(this).val(),b=a.length;return $(this).siblings("input.counter").val($(this).hasClass("count_down")?$(this).attr("size")-b:b),b>$(this).attr("size")?($(this).siblings("input.counter").css("background","pink"),alert("Please keep your answers within "+$(this).attr("size")+" characters. And please, no pasting of any word processing files. Thank you."),!1):void $(this).siblings("input.counter").css("background","#fff")})});